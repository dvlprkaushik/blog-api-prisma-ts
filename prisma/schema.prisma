// ============================================================
// üì¶ Blog API - Prisma Schema
// ------------------------------------------------------------
// Author: Kaushik Das
// Description: Database schema for the Blog API project.
// Technologies: Prisma ORM, PostgreSQL (NeonDB), TypeScript, Express.js
// ------------------------------------------------------------
// This schema defines two main models:
//   1Ô∏è‚É£ User  ‚Üí Represents registered users.
//   2Ô∏è‚É£ Post  ‚Üí Represents blog posts authored by users.
//
// Relations:
//   - One User ‚Üí Many Posts (Cascade on delete)
// ============================================================

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================================
// üßç‚Äç‚ôÇÔ∏è User Model
// ------------------------------------------------------------
// Represents an application user.
// Each user can create multiple posts.
// Fields:
// - id: Primary key (auto-incremented integer)
// - email: Unique user email
// - name: Full name of the user
// - posts: Relation to Post model (One-to-Many)
// - createdAt: Timestamp when the user was created
// ============================================================

model User{
  id Int @id @default(autoincrement())
  email String
  name String
  posts Post[]
  createdAt DateTime @default(now())
}

// ============================================================
// üìù Post Model
// ------------------------------------------------------------
// Represents a blog post created by a user.
// Fields:
// - id: Primary key (auto-incremented integer)
// - title: Post title
// - content: Post body/content
// - published: Boolean flag for publish status
// - authorId: Foreign key (User ID)
// - author: Relation to User model (Many-to-One)
// - createdAt: Timestamp when post was created
// - updatedAt: Auto-updated timestamp on edit
// ============================================================
model Post{
  id Int @id @default(autoincrement())
  title String
  content String
  published Boolean @default(false)
  authorId Int
  author User @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
